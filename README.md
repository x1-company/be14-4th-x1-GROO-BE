# ğŸŒ³ Groo 

## "ê°ì •ì„ ê¸°ë¡í•˜ê³ , ì •ì›ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ê°ì„± ë‹¤ì´ì–´ë¦¬ ì„œë¹„ìŠ¤"

<br><br><br>

# ğŸš€ Team X1 ğŸš€

| <img src="https://github.com/user-attachments/assets/c96cd9e0-dee6-4026-9086-7b2ffee3e56f" width="140"> | <img src="https://github.com/user-attachments/assets/c3df4899-1878-4180-a133-689254256ec8" width="140"> | <img src="https://github.com/user-attachments/assets/2e220b76-b0b4-4939-a277-dd1dfbf92db1" width="140"> | <img src="https://github.com/user-attachments/assets/8c603a5c-9c99-4d21-a353-e194298b1318" width="140"> | <img src="https://github.com/user-attachments/assets/47e0f3a1-b5e0-48c7-b63f-590db29cc4df" width="140"> | <img src="https://github.com/user-attachments/assets/8d5fd81a-89cb-42a1-a432-45a5ab59516c" width="140"> |
| :-----------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------: |
| í™©ìˆ˜ë¯¼ | ì‹ ë¯¼ê²½ | ì´ì˜ˆì› | ì¡°ìœ¤íƒœ | ì´ì¤€ê·œ | ë°•ì§€ì› |
| [<img src="https://img.shields.io/badge/Github-Link-181717?logo=Github">](https://github.com/emily9949) | [<img src="https://img.shields.io/badge/Github-Link-181717?logo=Github">](https://github.com/mmmv41) | [<img src="https://img.shields.io/badge/Github-Link-181717?logo=Github">](https://github.com/oni128) | [<img src="https://img.shields.io/badge/Github-Link-181717?logo=Github">](https://github.com/cxzaqq) | [<img src="https://img.shields.io/badge/Github-Link-181717?logo=Github">](https://github.com/JK-LEE98) | [<img src="https://img.shields.io/badge/Github-Link-181717?logo=Github">](https://github.com/zi-won) |

<br><br>
# ğŸŒ± ê¸°íš ì˜ë„

ìš°ë¦¬ëŠ” í•˜ë£¨ì—ë„ ì—¬ëŸ¬ ê°ì •ì„ ê²ªì§€ë§Œ, ê·¸ ê°ì •ë“¤ì´ ì§€ë‚˜ê°„ ìë¦¬ì—ëŠ” ì¢…ì¢… ì•„ë¬´ê²ƒë„ ë‚¨ì§€ ì•ŠìŠµë‹ˆë‹¤.
GrooëŠ” ë°”ë¡œ ì´ ìˆœê°„ë“¤ì„ ë†“ì¹˜ì§€ ì•Šê³ , ê°ì •ì„ ê¸°ë¡í•˜ê³  í‘œí˜„í•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ ê³µê°„ì„ ë§Œë“¤ê³ ì ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.

ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ ì¼ê¸°ì¥ì„ ë„˜ì–´, GrooëŠ” ê°ì •ì„ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ì¼ê¸°ë¥¼ ì‘ì„±í•˜ë©´, AIê°€ ê°ì •ì„ ë¶„ì„í•˜ê³  ê·¸ ê²°ê³¼ì— ë”°ë¼ ì •ì›ì„ ê¾¸ë°€ ìˆ˜ ìˆëŠ” ìì—° ìš”ì†Œ(ê½ƒ, ë‚˜ë¬´, ë‚ ì”¨ ë“±)ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
ì´ë ‡ê²Œ í‘œí˜„ëœ ê°ì •ì€ â€˜í•˜ë£¨ì¹˜ ë§ˆìŒâ€™ì„ ë‹´ì€ ì‘ì€ ì •ì›ì´ ë˜ê³ ,
ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ í•˜ë‚˜ì˜ ê°œì¸ì ì¸ ê°ì •ì˜ ìˆ²ìœ¼ë¡œ í™•ì¥ë˜ì–´ ê°‘ë‹ˆë‹¤.

GrooëŠ” ìœ„ë¡œë¥¼ ì£¼ê¸° ìœ„í•œ ë„êµ¬ë¼ê¸°ë³´ë‹¤ëŠ”, ìŠ¤ìŠ¤ë¡œì˜ ê°ì •ê³¼ ë§ˆìŒ ìƒíƒœë¥¼ ë°”ë¼ë³´ê³  í‘œí˜„í•˜ëŠ” ì¼ìƒì˜ ë£¨í‹´ì´ ë˜ê¸°ë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.
ê°ì •ì€ ì¢‹ê³  ë‚˜ì¨ì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼, ì¡´ì¬ ìì²´ë¡œ ì˜ë¯¸ê°€ ìˆë‹¤ëŠ” ë¯¿ìŒ ì•„ë˜
ìŠ¬í””, ê¸°ì¨, ë¶ˆì•ˆ, ì„¤ë ˜ ë“± ë‹¤ì–‘í•œ ê°ì •ì„ ìˆëŠ” ê·¸ëŒ€ë¡œ ê¸°ë¡í•˜ê³  ë‚¨ê¸¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

ë˜í•œ ì‚¬ìš©ìëŠ” í˜¼ìë§Œì˜ ì •ì›ì„ ê°€ê¿€ ìˆ˜ë„ ìˆê³ , ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ìˆ²ì„ ë§Œë“¤ì–´ ì„œë¡œì˜ ê°ì •ì„ ê³µìœ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì´ì²˜ëŸ¼ GrooëŠ” â€œê°ì •ì˜ í‘œí˜„â€ê³¼ â€œì •ì„œì  ì—°ê²°â€, ë‘ ê°€ì§€ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ìƒˆë¡œìš´ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

ë‹¨ í•œ ì¤„ì˜ ì¼ê¸°ë¼ë„ ê´œì°®ì•„ìš”.
ê·¸ë‚ ì˜ ê°ì •ì´ í•˜ë‚˜ì˜ ë‚˜ë¬´ê°€ ë˜ì–´, ë‹¹ì‹ ì˜ ì •ì›ì— ìëë‹ˆë‹¤. ğŸŒ±
# CICD

## ì•„í‚¤í…ì²˜

<details>
  <summary>ì•„í‚¤í…ì²˜ ë³´ê¸°</summary>

  ![image](https://github.com/user-attachments/assets/1e896b25-2f05-4c7d-92f9-442e9e02ae73)

</details>

## jenkins íŒŒì´í”„ë¼ì¸ ì½”ë“œ

<details>
  <summary>ì½”ë“œ ë³´ê¸°</summary>
  
  ```groovy
pipeline {
    agent any

    tools {
        gradle 'gradle'
        jdk 'openJDK17'
    }

    environment {
        GITHUB_URL = 'https://github.com/x1-company/be14-4th-x1-GROO-BE.git'
    }

    stages {
        stage('Preparation') {
            steps {
                script {
                    if (isUnix()) {
                        sh 'docker --version'
                    } else {
                        bat 'docker --version'
                    }
                }
            }
        }

        stage('Checkout & Inject Secrets') {
            steps {
                git branch: 'feature/roy/CICD', url: "${env.GITHUB_URL}"
                withCredentials([file(credentialsId: 'x1_groo_boot-yml', variable: 'APP_YML_PATH')]) {
                    script {
                        if (isUnix()) {
                            sh "mkdir -p ./src/main/resources"
                            sh "cp $APP_YML_PATH ./src/main/resources/application.yml"
                        } else {
                            bat 'if not exist src\\main\\resources mkdir src\\main\\resources'
                            bat 'copy %APP_YML_PATH% src\\main\\resources\\application.yml'
                        }
                    }
                }
            }
        }

        stage('Source Build') {
            steps {
                script {
                    if (isUnix()) {
                        sh "chmod +x ./gradlew"
                        sh "./gradlew clean build"
                    } else {
                        bat "gradlew.bat clean build"
                    }
                }
            }
        }

        stage('Container Build and Push') {
            steps {
                script {
                    withCredentials([usernamePassword(credentialsId: 'DOCKERHUB_PASSWORD', usernameVariable: 'DOCKER_USER', passwordVariable: 'DOCKER_PASS')]) {
                        if (isUnix()) {
                            sh "docker login -u ${DOCKER_USER} -p ${DOCKER_PASS}"
                            sh "docker build -t ${DOCKER_USER}/x1_groo_boot:latest ."
                            sh "docker push ${DOCKER_USER}/x1_groo_boot:latest"
                        } else {
                            bat "docker login -u %DOCKER_USER% -p %DOCKER_PASS%"
                            bat "docker build -t ${DOCKER_USER}/x1_groo_boot:latest ."
                            bat "docker push ${DOCKER_USER}/x1_groo_boot:latest"
                        }
                    }
                }
            }
        }

        stage('Run Container') {
            steps {
                script {
                    def containerName = "x1_groo_boot_container"
                    def imageName = "cxzaqq/x1_groo_boot:latest"

                    if (isUnix()) {
                        sh "docker ps -q --filter 'name=${containerName}' | grep -q . && docker rm -f ${containerName} || echo 'No existing container to remove'"
                        sh "docker run -d --name ${containerName} -p 8080:8080 ${imageName}"
                    } else {
                        bat """
                            FOR /F %%i IN ('docker ps -q --filter "name=${containerName}"') DO docker rm -f %%i
                            docker run -d --name ${containerName} -p 8080:8080 ${imageName}
                            docker ps
                            docker logs ${containerName}
                        """
                    }
                }
            }
        }
    }

    post {
        always {
            script {
                // application.yml ì‚­ì œ
                if (isUnix()) {
                    sh 'rm -f ./src/main/resources/application.yml'
                    sh 'docker logout'
                } else {
                    bat 'del /F /Q src\\main\\resources\\application.yml'
                    bat 'docker logout'
                }
            }
        }
        success {
            echo 'Pipeline succeeded!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }
}
```
</details>

## í…ŒìŠ¤íŠ¸ ê²°ê³¼

<details>
  <summary>ë§í¬ ë³´ê¸°</summary>

  https://ohgiraffers.notion.site/CICD-1e8649136c1180f78da6f0e62d73bb0b?pvs=73

</details>

## ERD
<details>
    <summary>ERD Cloud</summary>
<img width="1016" alt="KakaoTalk_Photo_2025-05-03-15-44-48" src="https://github.com/user-attachments/assets/d75dab37-700a-44cb-818a-0c66ac2146ea" />
</details>
<details>
    <summary>ERD ìƒì„¸ë³´ê¸°</summary>
  
```mermaid
erDiagram
    user {
        INT id PK
        VARCHAR email
        VARCHAR oauth_provider
        VARCHAR oauth_id
        VARCHAR password
        DATETIME created_at
        VARCHAR role
        DATETIME birth
        VARCHAR nickname
        BOOLEAN is_deleted
    }

    background {
        INT id PK
        VARCHAR name
        VARCHAR image_url
    }

    category {
        INT id PK
        VARCHAR category
    }

    item {
        INT id PK
        VARCHAR name
        VARCHAR image_url
        INT category_id FK
        VARCHAR emotion
    }

    forest {
        INT id PK
        VARCHAR name
        VARCHAR month
        BOOLEAN is_public
        INT background_id FK
        INT user_id FK
    }

    user_item {
        INT id PK
        INT item_id FK
        INT user_id FK
        INT total_count
        INT placed_count
        INT forest_id FK
    }

    shared_forest {
        INT id PK
        INT user_id FK
        INT forest_id FK
    }

    mailbox {
        INT id PK
        VARCHAR content
        DATETIME created_at
        BOOLEAN is_deleted
        INT user_id FK
        INT forest_id FK
    }

    announcement {
        INT id PK
        INT admin_id FK
        VARCHAR title
        TEXT content
        DATETIME created_at
    }

    diary {
        INT id PK
        DATETIME created_at
        DATETIME updated_at
        TEXT content
        BOOLEAN is_published
        INT user_id FK
        INT forest_id FK
        VARCHAR weather
    }

    diary_emotion {
        INT id PK
        INT weight
        INT diary_id FK
        VARCHAR emotion
    }

    placement {
        INT id PK
        DECIMAL position_x
        DECIMAL position_y
        INT user_id FK
        INT user_item_id FK
    }

    item }o--|| category : belongs_to
    forest }o--|| background : uses
    forest }o--|| user : owned_by
    user_item }o--|| user : owned_by
    user_item }o--|| item : contains
    user_item }o--|| forest : placed_in
    shared_forest }o--|| user : viewer
    shared_forest }o--|| forest : shared_from
    mailbox }o--|| user : written_by
    mailbox }o--|| forest : posted_in
    announcement }o--|| user : created_by
    diary }o--|| user : written_by
    diary }o--|| forest : related_to
    diary_emotion }o--|| diary : analyzed_from
    placement }o--|| user : placed_by
    placement }o--|| user_item : uses
```
</details>

# ê°œì¸ íšŒê³ 

<details>
  <summary>íšŒê³  ë³´ê¸°</summary>

  |ì´ë¦„|íšŒê³ |
  |------|---|
  |ë°•ì§€ì›|ë‚´ìš©|
  |ì‹ ë¯¼ê²½|ë‚´ìš©|
  |ì´ì˜ˆì›|ë‚´ìš©|
  |ì´ì¤€ê·œ|ë‚´ìš©|
  |ì¡°ìœ¤íƒœ|ë‚´ìš©|
  |í™©ìˆ˜ë¯¼|ë‚´ìš©|

</details>
